# AI数据集蒸馏工厂项目

## 项目规划

### 项目概述
构建一个基于Streamlit的Web应用，利用多个大模型API（OpenAI、Anthropic Claude、Google Gemini等）生成高质量的指令微调数据集。

### 核心功能
- 多模型支持：集成OpenAI、Claude、Gemini等主流大模型API
- 智能任务分解：自动生成领域相关的任务分类树
- 批量数据生成：基于任务主题批量生成高质量训练数据
- 多格式导出：支持JSONL和CSV格式导出，兼容主流训练框架

## 实施方案

### 技术栈
- **前端框架**: Streamlit (Python Web应用框架)
- **大模型API**: OpenAI GPT、Anthropic Claude、Google Gemini
- **数据处理**: Pandas (数据处理和表格展示)
- **环境管理**: python-dotenv (环境变量管理)

### 开发环境配置
1. Python虚拟环境已配置完成
2. 依赖库已定义在requirements.txt中
3. 国内源配置已完成，加速依赖安装

### 安装步骤
```bash
# 激活虚拟环境
source venv/Scripts/activate  # Windows

# 使用国内源安装依赖
pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple

# 或者使用配置文件自动选择源
pip install -r requirements.txt
```

### 一键启动
```bash
# 使用一键启动脚本（推荐）
python start.py

# 或者手动启动
streamlit run app.py
```

## 进度记录

### ✅ 已完成任务
- [x] 2024-12-19: 项目核心代码开发完成 (app.py)
- [x] 2024-12-19: 依赖库文件生成 (requirements.txt)
- [x] 2024-12-19: 国内大厂源配置完成 (pip.conf)## ✅ 已完成任务
- [x] 2024-12-19: 一键启动脚本开发完成 (start.py)
- [x] 2024-12-19: Streamlit隐私配置完成 (.streamlit/config.toml)
- [x] 2024-12-19: 自定义模型配置功能完成 (支持DeepSeek、Groq、本地vLLM等)### 🔄 进行中任务
- [ ] 项目文档完善
- [ ] 使用说明补充

### 🛠️ 问题解决记录
- [x] 2024-12-19: 修复端口冲突问题 - 端口8502被占用，切换到8503端口成功启动应用
- [x] 2024-12-19: 修复服务不可用问题 - 重新启动应用，现在运行在 http://localhost:8504

### 📋 待办任务
- [ ] 测试各模型API集成
- [ ] 优化用户界面体验
- [ ] 添加错误处理和日志功能

## 启动脚本说明

### start.py - 一键启动工具
自动完成以下任务：
1. ✅ 检查Python版本兼容性（需要Python 3.7+）
2. ✅ 验证虚拟环境是否存在
3. ✅ 检查依赖库是否已安装
4. ✅ 自动安装缺失的依赖（使用国内清华源）
5. ✅ 启动Streamlit应用（端口8501，本地访问）

### 使用方法
```bash
# 在项目根目录执行
python start.py

# 脚本会自动处理所有启动流程
```

### 特性
- **智能检测**: 自动检查环境和依赖
- **自动修复**: 缺失依赖时自动安装
- **友好提示**: 清晰的启动过程和状态信息
- **错误处理**: 完善的异常处理和用户提示

## 配置文件说明

### requirements.txt
包含项目所有依赖库及其版本要求，确保环境一致性。

### pip.conf
配置pip安装源，优先使用国内大厂源（清华源），提高安装速度和稳定性。

### .env
环境变量配置文件，用于存储各模型API密钥等敏感信息。

### .streamlit/config.toml
Streamlit配置文件，用于：
- **禁用数据收集**: `gatherUsageStats = false` 禁止收集使用统计
- **主题定制**: 设置应用的颜色主题和字体
- **服务器配置**: 设置端口、地址等服务器参数
- **隐私保护**: 确保不会要求输入email或其他个人信息

#### 自定义模型配置
应用支持多种自定义模型服务商配置：

**支持的自定义服务商：**
- **DeepSeek**: https://api.deepseek.com/v1
- **Groq**: https://api.groq.com/openai/v1
- **Moonshot**: https://api.moonshot.cn/v1
- **本地vLLM**: http://localhost:8000/v1
- **本地Ollama**: http://localhost:11434/v1

**配置选项：**
- **Base URL**: API服务器地址
- **自定义端口**: 可选的特定端口配置（如8000, 8080）
- **API Key**: 访问API所需的密钥
- **模型名称**: 预设模型列表或自定义输入

**使用方法：**
1. 在侧边栏选择 "Custom (OpenAI-Compatible)"
2. 输入Base URL和端口（如需要）
3. 选择预设模型或输入自定义模型名称
4. 输入API密钥
5. 开始使用自定义模型

## 注意事项
1. 使用前请确保已配置各模型API密钥到.env文件
2. 建议在国内网络环境下使用配置的国内源进行安装
3. 项目遵循用户规则中的三大原则：不延期、不超范围、不出错