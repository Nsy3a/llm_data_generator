# AI数据集蒸馏工厂

## 项目概述
本项目是一个基于Streamlit的AI数据集蒸馏工厂，提供智能化的数据处理和分析功能。

## 核心特性

### 🚀 智能端口管理
- **自动端口检测**: 启动时自动检测8501-8600范围内的可用端口
- **端口冲突避免**: 如果默认端口被占用，自动切换到下一个可用端口
- **动态端口分配**: 无需手动配置，每次启动都会分配合适的端口

### 🔧 一键启动脚本
`start.py` 是一个智能启动脚本，具备以下功能：

1. **环境预检**: 自动检测Python版本和虚拟环境
2. **虚拟环境验证**: 确保venv环境可用
3. **依赖智能管理**: 自动安装缺失的依赖包
4. **国内源优化**: 使用清华源加速安装
5. **智能端口管理**: 自动检测并分配可用端口
6. **一键启动**: 自动激活环境并启动Streamlit应用

**使用方法**:
```bash
python start.py
```

### 📁 项目结构
```
NexusLearn/
├── .env                    # 环境变量配置
├── .streamlit/
│   └── config.toml       # Streamlit配置文件
├── app.py                 # 主应用文件
├── start.py               # 一键启动脚本
├── requirements.txt       # 依赖列表
├── pip.conf              # pip配置文件
└── venv/                  # 虚拟环境目录
```

## 端口配置说明

启动脚本现在支持智能端口管理：

- **端口范围**: 默认检测8501-8600端口
- **自动切换**: 遇到端口冲突时自动选择下一个可用端口
- **实时显示**: 启动时会显示当前使用的端口号
- **可配置**: 可通过修改`find_available_port()`函数参数调整端口范围

**技术实现**:
```python
def find_available_port(start_port=8501, max_port=8600):
    """查找可用端口"""
    for port in range(start_port, max_port + 1):
        try:
            sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
            sock.settimeout(0.1)
            result = sock.connect_ex(('localhost', port))
            sock.close()
            if result != 0:  # 端口未被占用
                return port
        except Exception:
            continue
    return None
```

## 使用指南

### 快速启动
```bash
# 一键启动（推荐）
python start.py

# 或直接启动Streamlit
streamlit run app.py
```

### 环境要求
- Python 3.7+
- 虚拟环境（推荐）

### 依赖安装
项目已配置国内源，依赖安装更快速：
```bash
pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple
```

## 核心功能

### 🤖 AI模型集成
- **多模型支持**: 集成OpenAI、Anthropic、Google、PollinationsAI等多种AI模型
- **智能模型选择**: 根据任务类型自动推荐最适合的模型
- **模型切换**: 支持实时切换不同AI模型服务商

### 📊 数据集蒸馏功能
- **任务分类树生成**: 基于AI智能分析生成领域任务分类树
- **数据模式识别**: 自动识别和提取数据中的关键模式
- **知识蒸馏**: 将复杂领域知识转化为结构化数据

## 更新日志

### 2025-01-21
- ✅ 建立Git存储排查文件，完善版本控制配置
- ✅ 添加.gitignore文件，排除虚拟环境、缓存和临时文件
- ✅ 创建.gitattributes文件，规范文本文件换行符处理
- ✅ 添加模型列表加载动画效果，优化用户体验
- ✅ 实现智能触发机制：仅当切换到Pollinations服务商时自动获取模型列表
- ✅ 为所有AI服务商（OpenAI、Anthropic、Google、Pollinations）添加一致的加载动画
- ✅ 优化模型获取逻辑，减少不必要的API调用
- ✅ 修复代码重复问题，优化代码结构
- ✅ 清理冗余注释，提升代码可读性
- ✅ 修复Pollinations AI参数传递逻辑
- ✅ 验证代码编译和运行稳定性

### 2025-01-20
- ✅ 移除图像生成功能（专注数据集蒸馏核心功能）
- ✅ 优化PollinationsAI文本生成体验
- ✅ 简化界面布局

### 2024-12-19
- ✅ 实现智能端口检测和自动分配功能
- ✅ 添加端口冲突检测和备用端口机制
- ✅ 更新配置文件支持动态端口
- ✅ 创建一键启动脚本(start.py)